<div *ngIf="!!event; else loadingIndicator" class="event-content margin__t margin__b">

    <div class="event-info-holder">
        <div class="">
            <p class="margin__b">Subscribers: <span>{{event.subscribers.length}}</span></p>
            <div class="flex__row__space" *ngIf="(isLoggedIn$ | async)">
                <div class="event-subscribe-btns">
                    <button (click)='subscribe()' *ngIf="canSubscribe" class="subscribe btn__primary">
                        <fa-icon [icon]="icons.favoriteIcon"></fa-icon>
                        Add to Favorites
                    </button>
                    <button (click)='unsubscribe()' *ngIf="!canSubscribe" class="unsubscribe btn__secondary">
                        <fa-icon [icon]="icons.favoriteIcon"></fa-icon>
                        Remove from Favorites
                    </button>
                </div>
                <div class="event-action-btns">
                    <button [routerLink]="['/events', event._id, 'edit']" *ngIf="isUserOwner"
                        class="btn__primary">Edit</button>
                    <button (click)='deleteEvent()' *ngIf="isUserOwner" class="btn__secondary">Delete</button>
                </div>
            </div>
        </div>
        <img src={{event.staticPhoto}} class="event-photo" />
        <div class="event-time-info">
            <span class="text__sub__normal">{{event.eventDate | date:'shortDate'}}, </span>
            <span class="text__sub__normal">{{event.eventStartTime}} </span>
        </div>

        <h3 class="margin__t margin__b">{{event.eventName}}</h3>
        <p class="text__regular">{{event.eventPlace}}, {{event.eventCity}}</p>
        <p class="text__sub__normal margin__b">{{event.eventAddress}}</p>
        <div>
            <span class="text__sub__accent">Type: {{event.eventType}}</span>
        </div>
        <div class="event-host-info-holder">
            <span class="text__sub__normal">Primary Host: {{event.userId}}</span>
        </div>
    </div>


    <div *ngIf="(isLoggedIn$ | async)" class="answer__comment">
        <p class="text__sub__normal">
            <span class="text__sub__accent">{{currentUser.username}} </span>
            add comment here:
        </p>
        <div class="answer">
            <form #newPostForm="ngForm" (ngSubmit)="submitNewPost(event._id, newPostForm)">
                <textarea name="postText" id="comment" cols="30" rows="10" [(ngModel)]="newPostForm.value.postText"
                    (input)="postTextChanged($event)"></textarea>
                <div class="flex__row__end">
                    <button [class.disabled]="!canSubmitPost" class="btn__primary">Post</button>
                </div>
            </form>
        </div>
    </div>


    <div *ngIf="event.posts.length > 0">
        <app-aside [eventId]="event._id"></app-aside>
    </div>

</div>

<ng-template #loadingIndicator>
    Loading...
</ng-template>