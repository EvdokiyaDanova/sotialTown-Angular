<div *ngIf="!!event; else loadingIndicator" class="event-content">
    <!-- event-title  -->
    <!-- <div class="event-title">
        <div class="event-name-wrapper">
            <div class="event-name">
                <h2>{{event.eventName}} {{isUserOwner}}</h2>
                <p>Date: <time> {{event.created_at | date:'short'}}</time></p>
            </div>
            <div class="subscribers">
                <p>Subscribers: <span>{{event.subscribers.length}}</span></p>
                <ng-container *ngIf="(isLoggedIn$ | async)">
                    <button (click)='subscribe()' *ngIf="canSubscribe" class="subscribe">Subscribe</button>
                    <button (click)='unsubscribe()' *ngIf="!canSubscribe" class="unsubscribe">Unsubscribe</button>
                    <button [routerLink]="['/events', event._id, 'edit']" *ngIf="isUserOwner" class="">Edit</button>
                    <button (click)='deleteEvent()' *ngIf="isUserOwner" class="">Delete</button>
                </ng-container>
            </div>
        </div>
    </div> -->



    <div class="event-details">
        <div class="subscribers">
            <p>Subscribers: <span>{{event.subscribers.length}}</span></p>
            <ng-container *ngIf="(isLoggedIn$ | async)">
                <button (click)='subscribe()' *ngIf="canSubscribe" class="subscribe">Subscribe</button>
                <button (click)='unsubscribe()' *ngIf="!canSubscribe" class="unsubscribe">Unsubscribe</button>
                <button [routerLink]="['/events', event._id, 'edit']" *ngIf="isUserOwner" class="">Edit</button>
                <button (click)='deleteEvent()' *ngIf="isUserOwner" class="">Delete</button>
            </ng-container>
        </div>
        <img src={{event.staticPhoto}} class="event-photo" />
        <span class="event-date">{{event.eventDate | date:'shortDate'}}</span>
        <h2>{{event.eventName}} {{isUserOwner}}</h2>
        <h3>{{event.eventPlace}}, {{event.eventCity}}</h3>
        <p>{{event.eventAddres}}</p>
        <div>
            <span class="text__sub__accent">Type: </span>
            <span class="text__sub__normal">{{event.eventAddres}}</span>
        </div>
        <div class="host-info-holder">
            <span class="text__sub__normal">Primary Host:</span>
            <span class="text__sub__normal">{{event.userId}}</span>
        </div>
    </div>


    <div *ngIf="(isLoggedIn$ | async)" class="answer-comment">
        <p><span>
                <currentUser>{{currentUser.username}} </currentUser>
            </span> add comment here:</p>
        <div class="answer">
            <form #newPostForm="ngForm" (ngSubmit)="submitNewPost(event._id, newPostForm)">
                <textarea name="postText" id="comment" cols="30" rows="10" [(ngModel)]="newPostForm.value.postText"
                    (input)="postTextChanged($event)"></textarea>
                <button [class.disabled]="!canSubmitPost">Post</button>
            </form>
        </div>
    </div>


    <div  *ngIf="event.posts.length > 0" >
        <app-aside [eventId]="event._id"></app-aside>
    </div>

</div>

<ng-template #loadingIndicator>
    Loading...
</ng-template>